<!doctype html><html><head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>html,body,canvas{margin:0;width:100%;height:100%;background:transparent}
#cam{position:fixed;inset:0;z-index:0;object-fit:cover}
#ui{position:fixed;left:12px;top:12px;z-index:2}</style>
</head><body>
<video id="cam" autoplay playsinline muted></video>
<div id="ui"><button id="btn">再生</button></div>
<canvas id="c"></canvas>
<script src="https://cdn.babylonjs.com/babylon.js"></script>
<script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
<script>
const v=document.getElementById('cam');
navigator.mediaDevices.getUserMedia({video:{facingMode:'environment'}})
  .then(s=>v.srcObject=s);

const c=document.getElementById('c'),e=new BABYLON.Engine(c,true);
const s=new BABYLON.Scene(e);
s.clearColor=new BABYLON.Color4(0,0,0,0);
const cam=new BABYLON.ArcRotateCamera("cam",Math.PI/2,1.1,2.2,BABYLON.Vector3.Zero(),s);
cam.attachControl(c,true);
new BABYLON.HemisphericLight("l",new BABYLON.Vector3(0,1,0),s);

let ag=null;
BABYLON.SceneLoader.Append("./","animetesthand1.glb",s,()=>{
  ag=s.animationGroups[0];
  s.meshes.forEach(m=>m.material&&(m.material.alpha=0.6));
});
document.getElementById('btn').onclick=()=>{
  if(!ag)return; ag.stop(); ag.start(false,1,5,12,false);
};
e.runRenderLoop(()=>s.render());
window.onresize=()=>e.resize();
</script></body></html>
